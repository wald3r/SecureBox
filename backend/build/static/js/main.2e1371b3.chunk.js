(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{108:function(e,t,a){e.exports=a.p+"static/media/welcome1.b2065f1e.jpg"},109:function(e,t,a){e.exports=a.p+"static/media/welcome2.dd5da491.jpg"},110:function(e,t,a){e.exports=a.p+"static/media/welcome3.7e758a00.jpg"},111:function(e,t,a){e.exports=a.p+"static/media/welcome4.99c1e010.jpg"},119:function(e,t,a){e.exports=a(209)},209:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),s=a(10),u=a(31),o=a(36),i=a(70),d=a(4),m=a.n(d),f=a(15),p=a.n(f),E="/api/files",h=null,v=function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={responseType:"blob",headers:{Authorization:h}},n.next=3,m.a.awrap(p.a.get("".concat(E,"/download/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a);case 5:case"end":return n.stop()}}))},b=function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:h}},n.next=3,m.a.awrap(p.a.post("".concat(E,"/upload"),e,t));case 3:return a=n.sent,n.abrupt("return",a);case 5:case"end":return n.stop()}}))},g=function(e){h="bearer ".concat(e)},w=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={headers:{Authorization:h}},a.next=3,m.a.awrap(p.a.get(E,e));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}}))},y=function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:h}},n.next=3,m.a.awrap(p.a.delete("".concat(E,"/eremove/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a);case 5:case"end":return n.stop()}}))},x=function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:h}},a.next=3,m.a.awrap(p.a.delete("".concat(E,"/dremove/").concat(e),t));case 3:case"end":return a.stop()}}))},O=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={headers:{Authorization:h}},a.next=3,m.a.awrap(p.a.get("".concat(E,"/pictures/"),e));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}}))},S=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={headers:{Authorization:h}},a.next=3,m.a.awrap(p.a.get("".concat(E,"/documents/"),e));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}}))},j=null,C=function(e,t){var a,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={headers:{Authorization:j}},r.next=3,m.a.awrap(p.a.put("".concat("/api/users","/details/").concat(t),e,a));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}))},N=function(e,t){var a,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={headers:{Authorization:j}},r.next=3,m.a.awrap(p.a.put("".concat("/api/users","/password/").concat(t),e,a));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}))},k=function(e){j="bearer ".concat(e)},U=function(){var e,t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={headers:{Authorization:j}},a.next=3,m.a.awrap(p.a.get("/api/users",e));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}}))},D=function(e,t){var a,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={headers:{Authorization:j}},r.next=3,m.a.awrap(p.a.put("".concat("/api/users","/check/").concat(t),e,a));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}))},T=function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:window.localStorage.setItem("loggedappUser",JSON.stringify(e)),g(e.token),k(e.token),t({type:"SETUSER",user:e});case 4:case"end":return a.stop()}}))}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADDLASTUSED":var a=Object(i.a)({},e,{lastUsed:t.list});return a;case"REMOVELASTUSED":var n=Object(i.a)({},e,{lastUsed:t.list});return n;case"SETUSER":return t.user;case"REMOVEUSER":return null;case"UPDATEDETAILS":var r=Object(i.a)({},e,{name:t.details.name,username:t.details.username,email:t.details.email});return window.localStorage.removeItem("loggedappUser"),window.localStorage.setItem("loggedappUser",JSON.stringify(r)),r;default:return e}},F=function(){return function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(U());case 2:t=a.sent,e({type:"GETUSERS",data:t.data});case 4:case"end":return a.stop()}}))}},A=function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:"CHANGEUSER",user:e});case 1:case"end":return a.stop()}}))}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETUSERS":return t.data;case"CHANGEUSER":var a=e.filter((function(e){return e.id!==t.user.id}));return a.concat(t.user),a.concat(t.user);default:return e}},I=function(e,t){return function(a){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"NOTIFICATION",data:e}),setTimeout((function(){a({type:"REMOVENOTIFICATION"})}),t);case 2:case"end":return n.stop()}}))}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.data;case"REMOVENOTIFICATION":return"";default:return e}},P=function(){return function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(w());case 2:if(400!==(t=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:a=t.data,e({type:"GETFILES",data:a});case 7:case"end":return n.stop()}}))}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETFILES":case"SETFILES":case"GETDOCUMENTS":case"GETPICTURES":return t.data;default:return e}},_=a(9),V=function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(p.a.post("/api/login",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},z=function(e,t){return function(a){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"ERROR",data:e}),setTimeout((function(){a({type:"REMOVERROR"})}),t);case 2:case"end":return n.stop()}}))}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return t.data;case"REMOVEERROR":return"";default:return e}},G=a(219),H=a(214),J=(a(34),{setUser:T,handleNotification:I,handleError:z,getFiles:P,getUsers:F}),K=Object(s.b)((function(e){return{user:e.user,users:e.users}}),J)((function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1];return r.a.createElement("div",null,r.a.createElement(G.a,{onSubmit:function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.prev=1,n.next=4,m.a.awrap(V({username:c,password:o}));case 4:a=n.sent,e.setUser(a),g(a.token),"admin"===a.role&&e.getUsers(),e.handleNotification("Login successfull!",5e3),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),n.t0.response?e.handleError(n.t0.response.data,5e3):n.t0.request?e.handleError(n.t0.request.data,5e3):e.handleError(n.t0.message,5e3),console.log(n.t0);case 15:case"end":return n.stop()}}),null,null,[[1,11]])}},r.a.createElement("table",{className:"table .table-striped",width:"10"},r.a.createElement("thead",{className:"thead-dark"}),r.a.createElement("tbody",{width:"10"},r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Username:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",required:!0,onChange:function(e){var t=e.target;return l(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Password:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",required:!0,onChange:function(e){var t=e.target;return i(t.value)}}))))),r.a.createElement(H.a,{className:"button",type:"submit"},"login")))})),W=function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(p.a.post("/api/registration",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},Y={handleNotification:I,handleError:z},Q=Object(s.b)(null,Y)((function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1],d=Object(n.useState)(""),f=Object(_.a)(d,2),p=f[0],E=f[1],h=Object(n.useState)(""),v=Object(_.a)(h,2),b=v[0],g=v[1],w=Object(n.useState)(""),y=Object(_.a)(w,2),x=y[0],O=y[1];return r.a.createElement("div",null,r.a.createElement(G.a,{onSubmit:function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),a.prev=1,p!==b){a.next=13;break}return a.next=5,m.a.awrap(W({username:c,password:p,name:x,email:o}));case 5:e.handleNotification("Registration successfull",5e3),l(""),i(""),E(""),g(""),O(""),a.next=14;break;case 13:e.handleError("Passwords do not match",5e3);case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(1),a.t0.response?e.handleError(a.t0.response.data,5e3):a.t0.request?e.handleError(a.t0.request.data,5e3):e.handleError(a.t0.message,5e3),console.error(a.t0);case 20:case"end":return a.stop()}}),null,null,[[1,16]])}},r.a.createElement("table",{className:"table .table-striped",width:"10"},r.a.createElement("thead",{className:"thead-dark"}),r.a.createElement("tbody",{width:"10"},r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Name:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"text",onChange:function(e){var t=e.target;return O(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Username:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",required:!0,type:"text",onChange:function(e){var t=e.target;return l(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"E-Mail:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",required:!0,type:"email",onChange:function(e){var t=e.target;return i(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Password:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",required:!0,onChange:function(e){var t=e.target;return E(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Repeat Password:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",required:!0,onChange:function(e){var t=e.target;return g(t.value)}}))))),r.a.createElement("div",null,r.a.createElement(H.a,{className:"button",type:"submit"},"Register"))))})),X=a(215),Z=Object(s.b)((function(e){return{notification:e.notification}}))((function(e){return""===e.notification?null:r.a.createElement("div",null,e.notification&&r.a.createElement(X.a,{variant:"success"},e.notification))})),$=a(108),ee=a.n($),te=a(109),ae=a.n(te),ne=a(110),re=a.n(ne),ce=a(111),le=a.n(ce),se=function(e){var t=Object(n.useState)(["",ee.a,ae.a,re.a,le.a]),a=Object(_.a)(t,2),c=a[0],l=(a[1],Math.floor(5*Math.random())),s=0===l?1:l;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("img",{src:c[s],alt:"background"}))},ue=a(112),oe=a(216),ie=function(e){return e.toString().length<2?"0".concat(e):e};var de={formatTime:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(ie(t.getMonth()+1),"-").concat(ie(t.getDay()))},createName:function(e,t,a,n,r,c,l){var s,u=a.split("/");return s=""===c?new Date:c,""!==r?"".concat(e,"__").concat(l,"__").concat(t,"__").concat(ie(s.getDate()),"-").concat(ie(s.getMonth()+1),"-").concat(s.getFullYear(),"__").concat(r,".").concat(u[1]):"".concat(e,"__").concat(l,"__").concat(t,"__").concat(ie(s.getDate()),"-").concat(ie(s.getMonth()+1),"-").concat(s.getFullYear(),"__").concat(n,".").concat(u[1])},formatName:function(e){var t=e.split("__"),a=e;return t.length>1&&(a=t[3],a+=t[4]),a}},me=a(113),fe=a.n(me),pe=(a(151),{handleNotification:I,handleError:z,getFiles:P}),Ee=Object(s.b)((function(e){return{user:e.user}}),pe)((function(e){var t=Object(ue.a)({},e),a=Object(n.useState)([]),c=Object(_.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(""),o=Object(_.a)(u,2),i=o[0],d=o[1],f=Object(n.useState)(""),p=Object(_.a)(f,2),E=p[0],h=p[1],v=Object(n.useState)(!1),g=Object(_.a)(v,2),w=g[0],y=g[1],x=Object(n.useState)(""),O=Object(_.a)(x,2),S=O[0],j=O[1],C=Object(n.useState)(!1),N=Object(_.a)(C,2),k=N[0],U=N[1],D=w?{padding:5,borderStyle:"solid",borderColor:"red",borderWidth:"thin"}:{padding:5,borderStyle:"solid",borderColor:"black",borderWidth:"thin"},T=function(){for(var e=["image/png","image/jpeg","image/gif","application/pdf","application/txt"],a=!1,n=0;n<l.length;n++){for(var r=0;r<e.length;r++)e[r]===l[n].type&&(a=!0);if(!1===a)return t.handleError("".concat(l[n].type," not supported format"),5e3),a}return a};return r.a.createElement("div",null,r.a.createElement("div",{style:D},"Settings:",r.a.createElement(G.a,{onSubmit:function(e){y(!w),w?(U(!1),h(""),d("")):(e.preventDefault(),U(!0))}},r.a.createElement(oe.a,{className:"mr-2","aria-label":"First group"},r.a.createElement(H.a,{className:"fileButton",active:"Document"===i,disabled:k,onClick:function(){return d("Document")},variant:"secondary"},"Documents"),r.a.createElement(H.a,{className:"fileButton",active:"Picture"===i,disabled:k,onClick:function(){return d("Picture")},variant:"secondary"},"Pictures")),r.a.createElement(fe.a,{onChange:function(e){j(e)},selected:S,disabled:k}),r.a.createElement("input",{onChange:function(e){var t=e.target;return h(t.value)},disabled:k}),r.a.createElement(H.a,{type:"submit"},w?"Remove":"Save"))),r.a.createElement("div",{className:"form-group files"},r.a.createElement(G.a,{method:"POST",encType:"multipart/form-data",onSubmit:function(e){var a,n,r;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,e.preventDefault(),0!==l.length){c.next=6;break}t.handleError("No files!",5e3),c.next=23;break;case 6:if(""!==i){c.next=10;break}t.handleError("Is it a document or a picture?",5e3),c.next=23;break;case 10:if(!1!==w){c.next=14;break}t.handleError("Save your settings!",5e3),c.next=23;break;case 14:if(!T()){c.next=23;break}for(a=new FormData,n=0;n<l.length;n++)a.append("file",l[n],"".concat(de.createName(t.user.username,i,l[n].type,l[n].name,E,S,n+1)));return c.next=19,m.a.awrap(b(a));case 19:200===(r=c.sent).status?(y(!1),t.handleNotification(r.data,5e3)):t.handleError(r.data,5e3),s([]),window.location.reload();case 23:c.next=29;break;case 25:c.prev=25,c.t0=c.catch(0),c.t0.response?t.handleError(c.t0.response.data,5e3):c.t0.request?t.handleError(c.t0.request.data,5e3):t.handleError(c.t0.message,5e3),console.error(c.t0);case 29:case"end":return c.stop()}}),null,null,[[0,25]])}},r.a.createElement("input",{type:"file",autoComplete:"off",name:"files",multiple:!0,onChange:function(e){e.preventDefault(),s(e.target.files)}}),r.a.createElement(H.a,{className:"button",type:"submit"},"Upload"))))})),he=Object(s.b)((function(e){return{error:e.error}}))((function(e){return""===e.error?null:r.a.createElement("div",null,e.error&&r.a.createElement(X.a,{variant:"danger"},e.error))})),ve=a(220),be=a(218),ge=a(48),we=a(217),ye=a(85),xe=a.n(ye),Oe={setFiles:function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:"SETFILES",data:e});case 1:case"end":return a.stop()}}))}},handleNotification:I,addLastUsed:function(e,t){return function(a){var n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(n=t.lastUsed.filter((function(t){return t.id!==e.id}))).length<20?n.unshift(e):(n.pop(),n.unshift(e)),a({type:"ADDLASTUSED",list:n});case 3:case"end":return r.stop()}}))}},removeLastUsed:function(e,t){return function(a){var n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.lastUsed.filter((function(t){return t.id!==e})),a({type:"REMOVELASTUSED",list:n});case 2:case"end":return r.stop()}}))}},handleError:z},Se=Object(s.b)((function(e){return{files:e.files,user:e.user}}),Oe)((function(e){var t=e.filteredFiles,a=Object(ge.a)(e,["filteredFiles"]),c=Object(n.useState)(!1),l=Object(_.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)([]),i=Object(_.a)(o,2),d=i[0],f=i[1],p={display:0===a.files.length?"none":""},E=!0===s?"Remove selection":"Select all",h=function(){u(!1),f([]);for(var e=document.getElementsByClassName("checkbox"),t=0;t<e.length;t++)"checkbox"===e[t].type&&(e[t].checked=!1)};return 0===t.length?r.a.createElement("div",null,"No files"):r.a.createElement("div",null,r.a.createElement(we.a,{className:"table table-fixed table-hover",responsive:!0,style:{padding:5,borderStyle:"solid",borderColor:"black",borderWidth:"thin",maxHeight:800,overflow:"auto",display:"block"}},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Select"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Mimetype"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("input",{onClick:function(t){return function(e,t){t.target.checked?f(d.concat(e)):f(d.filter((function(t){return t.id!==e.id})))}(e,t)},type:"checkbox",className:"checkbox"})),r.a.createElement("td",null,e.category),r.a.createElement("td",null,de.formatName(e.name)),r.a.createElement("td",null,e.mimetype),r.a.createElement("td",null,e.size),r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement(H.a,{onClick:function(){return function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(v(e.id));case 3:return t=n.sent,xe()(t.data,e.name),a.addLastUsed(e,a.user),a.handleNotification("Download started...",2500),n.next=9,m.a.awrap(x(e.id));case 9:h(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),n.t0.response?a.handleError(n.t0.response.data,5e3):n.t0.request?a.handleError(n.t0.request.data,5e3):a.handleError(n.t0.message,5e3),console.error(n.t0);case 16:case"end":return n.stop()}}),null,null,[[0,12]])}(e)}},r.a.createElement("i",{className:"fa fa-folder"}))),r.a.createElement("td",null,r.a.createElement(H.a,{onClick:function(){return function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(y(e.id));case 3:200===t.sent.status&&(a.handleNotification("File ".concat(e.name," removed"),5e3),a.removeLastUsed(e.id,a.user),a.setFiles(a.files.filter((function(t){return t.id!==e.id}))),h()),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response?a.handleError(t.t0.response.data,5e3):t.t0.request?a.handleError(t.t0.request.data,5e3):a.handleError(t.t0.message,5e3),console.error(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,7]])}(e)}},r.a.createElement("i",{className:"fa fa-trash"}))))})))),r.a.createElement("div",{style:p},r.a.createElement(H.a,{onClick:function(){var e=document.getElementsByClassName("checkbox");if(u(!s),!1===s){for(var t=0;t<e.length;t++)"checkbox"===e[t].type&&(e[t].checked=!0);f(a.files)}else{for(var n=0;n<e.length;n++)"checkbox"===e[n].type&&(e[n].checked=!1);f([])}}},E),r.a.createElement(H.a,{onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{d.map((function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(y(e.id));case 2:a.setFiles(a.files.filter((function(t){return t.id!==e.id}))),a.removeLastUsed(e.id,a.user),a.handleNotification("File ".concat(e.name," removed"),5e3),h();case 6:case"end":return t.stop()}}))}))}catch(t){t.response?a.handleError(t.response.data,5e3):t.request?a.handleError(t.request.data,5e3):a.handleError(t.message,5e3),console.error(t)}case 1:case"end":return e.stop()}}))}},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement(H.a,{onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{d.map((function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(v(e.id));case 2:t=n.sent,xe()(t.data,e.name),a.addLastUsed(e,a.user),a.handleNotification("Download started...",2500),h();case 7:case"end":return n.stop()}}))}))}catch(t){t.response?a.handleError(t.response.data,5e3):t.request?a.handleError(t.request.data,5e3):a.handleError(t.message,5e3),console.error(t)}case 1:case"end":return e.stop()}}))}},r.a.createElement("i",{className:"fa fa-folder"}))))})),je={getDocuments:function(){return function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(S());case 2:if(400!==(t=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:a=t.data,e({type:"GETDOCUMENTS",data:a});case 7:case"end":return n.stop()}}))}},getFiles:P,getPictures:function(){return function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(O());case 2:if(400!==(t=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:a=t.data,e({type:"GETPICTURES",data:a});case 7:case"end":return n.stop()}}))}}},Ce=Object(s.b)((function(e){return{user:e.user,files:e.files}}),je)((function(e){var t=Object(n.useState)("LastUsed"),a=Object(_.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1],d=Object(n.useState)(""),m=Object(_.a)(d,2),f=m[0],p=m[1],E=""===o?e.files:e.files.filter((function(e){return de.formatName(e.name).includes(o)})),h=""===f?E:E.filter((function(e){return e.date.includes(f)}));return r.a.createElement("div",null,r.a.createElement("div",{style:{padding:5,borderStyle:"solid",borderColor:"black",borderWidth:"thin"}},r.a.createElement("b",null,"Filter"),r.a.createElement("br",null),"Name: ",r.a.createElement("input",{type:"search",onChange:function(e){e.preventDefault(),i(e.target.value)}}),"Date: ",r.a.createElement("input",{type:"search",onChange:function(e){e.preventDefault(),p(e.target.value)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ve.a,{id:"controlled-tab-example",activeKey:c,onSelect:function(t){l(t),"All"===t?e.getFiles():"Document"===t?e.getDocuments():"Picture"===t&&e.getPictures()}},r.a.createElement(be.a,{eventKey:"LastUsed",title:"Last Used"},r.a.createElement(Se,{filteredFiles:e.user.lastUsed})),r.a.createElement(be.a,{eventKey:"All",title:"All"},r.a.createElement(Se,{filteredFiles:h})),r.a.createElement(be.a,{eventKey:"Document",title:"Documents"},r.a.createElement(Se,{filteredFiles:h})),r.a.createElement(be.a,{eventKey:"Picture",title:"Pictures"},r.a.createElement(Se,{filteredFiles:h})))))})),Ne={handleNotification:I,handleError:z,updateUser:function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:"UPDATEDETAILS",details:e});case 1:case"end":return a.stop()}}))}},changeUser:A},ke=Object(s.b)((function(e){return{user:e.user,users:e.users}}),Ne)((function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1],d=Object(n.useState)(""),f=Object(_.a)(d,2),p=f[0],E=f[1],h=Object(n.useState)(""),v=Object(_.a)(h,2),b=v[0],g=v[1],w=Object(n.useState)(""),y=Object(_.a)(w,2),x=y[0],O=y[1],S=Object(n.useState)(""),j=Object(_.a)(S,2),k=j[0],U=j[1],T=!1,R=!1,F=!1;if(null!==e.user){return r.a.createElement("div",null,r.a.createElement(G.a,{onSubmit:function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),""===o&&(T=!0),""===c&&(R=!0),""===p&&(F=!0),n.prev=4,n.next=7,m.a.awrap(C({username:!0===R?e.user.username:c,name:!0===T?e.user.name:o,email:!0===F?e.user.email:p,active:e.user.active,role:e.user.role},e.user.id));case 7:a=n.sent,e.updateUser(a.data),e.changeUser(a.data),e.handleNotification("User updated",5e3),l(""),i(""),E(""),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(4),n.t0.response?e.handleError(n.t0.response.data,5e3):n.t0.request?e.handleError(n.t0.request.data,5e3):e.handleError(n.t0.message,5e3),console.error(n.t0);case 20:case"end":return n.stop()}}),null,null,[[4,16]])}},r.a.createElement(we.a,{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Change user details"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Username"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",defaultValue:e.user.username,type:"text",onChange:function(e){var t=e.target;return l(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",defaultValue:e.user.name,type:"text",onChange:function(e){var t=e.target;return i(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"E-Mail"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",defaultValue:e.user.email,type:"email",onChange:function(e){var t=e.target;return E(t.value)}}))))),r.a.createElement(H.a,{type:"Submit"},"Save changes")),r.a.createElement(G.a,{onSubmit:function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),console.log("changes",b,x,k),b===x){a.next=6;break}e.handleError("Passwords have to be the same",5e3),a.next=26;break;case 6:if(b!==k){a.next=10;break}e.handleError("Old and new passwords are the same",5e3),a.next=26;break;case 10:return a.prev=10,a.next=13,m.a.awrap(D({password:k},e.user.id));case 13:if(200!==a.sent.status){a.next=21;break}return a.next=17,m.a.awrap(N({password:b},e.user.id));case 17:e.handleNotification("Password updated",5e3),U(""),g(""),O("");case 21:a.next=26;break;case 23:a.prev=23,a.t0=a.catch(10),a.t0.response?e.handleError(a.t0.response.data,5e3):a.t0.request?e.handleError(a.t0.request.data,5e3):e.handleError(a.t0.message,5e3);case 26:case"end":return a.stop()}}),null,null,[[10,23]])}},r.a.createElement(we.a,{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Change password"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Old password"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",onChange:function(e){var t=e.target;return U(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"New password"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",onChange:function(e){var t=e.target;return g(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Repeat new password"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",onChange:function(e){var t=e.target;return O(t.value)}}))))),r.a.createElement(H.a,{type:"Submit"},"Save changes")))}})),Ue=a(221),De={handleNotification:I,handleError:z},Te=Object(s.b)(null,De)((function(e){var t=e.showDialog,a=e.handleShowDialog,c=e.user,l=Object(ge.a)(e,["showDialog","handleShowDialog","user"]),s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1],d=Object(n.useState)(""),f=Object(_.a)(d,2),p=f[0],E=f[1],h=Object(n.useState)(""),v=Object(_.a)(h,2),b=v[0],g=v[1];if(null===c)return null;var w=function(){a(!1)},y=function(e){var t=e.target.value;t.replace(/\s/g,""),c.role=t};return r.a.createElement("div",null,r.a.createElement(Ue.a,{show:t,onHide:w},r.a.createElement(Ue.a.Header,{closeButton:!0},r.a.createElement(Ue.a.Title,null,"Edit user details: ")),r.a.createElement(Ue.a.Body,null,r.a.createElement("table",{className:"table .table-striped",width:"10"},r.a.createElement("thead",{className:"thead-dark"}),r.a.createElement("tbody",{width:"10"},r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Username:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",required:!0,defaultValue:c.username,type:"text",onChange:function(e){e.preventDefault(),E(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Fullname:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",defaultValue:c.name,type:"text",onChange:function(e){e.preventDefault(),i(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"E-Mail:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",required:!0,defaultValue:c.email,type:"email",onChange:function(e){e.preventDefault(),g(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Role:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"radio",name:"role",value:"admin",defaultChecked:"admin"===c.role,onChange:y}),"admin",r.a.createElement("input",{autoComplete:"off",type:"radio",name:"role",value:"user",defaultChecked:"user"===c.role,onChange:y}),"user")),r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Active:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"checkbox",name:"active",defaultChecked:c.active,onChange:function(){c.active=!c.active}})))))),r.a.createElement(Ue.a.Footer,null,r.a.createElement(H.a,{variant:"secondary",onClick:w},"Close"),r.a.createElement(H.a,{variant:"primary",onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return""!==o&&(c.name=o),""!==p&&(c.username=p),""!==b&&(c.email=b),e.prev=3,e.next=6,m.a.awrap(C(c,c._id));case 6:200===e.sent.status&&(l.handleNotification("User got updated!",5e3),a(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response?l.handleError(e.t0.response.data,5e3):e.t0.request?l.handleError(e.t0.request.data,5e3):l.handleError(e.t0.message,5e3),console.log(e.t0);case 14:case"end":return e.stop()}}),null,null,[[3,10]])}},"Save Changes"))))})),Re={handleNotification:I,handleError:z},Fe=Object(s.b)(null,Re)((function(e){var t=e.showDialog,a=e.handleShowDialog,c=e.user,l=Object(ge.a)(e,["showDialog","handleShowDialog","user"]),s=Object(n.useState)(""),u=Object(_.a)(s,2),o=u[0],i=u[1];if(null===c)return null;var d=function(){a(!1)};return r.a.createElement("div",null,r.a.createElement(Ue.a,{show:t,onHide:d},r.a.createElement(Ue.a.Header,{closeButton:!0},r.a.createElement(Ue.a.Title,null,"Edit user details: ")),r.a.createElement(Ue.a.Body,null,r.a.createElement("table",{className:"table .table-striped",width:"10"},r.a.createElement("thead",{className:"thead-dark"}),r.a.createElement("tbody",{width:"10"},r.a.createElement("tr",null,r.a.createElement("td",{width:"10"},"Password:"),r.a.createElement("td",null,r.a.createElement("input",{autoComplete:"off",type:"password",onChange:function(e){e.preventDefault(),i(e.target.value)}})))))),r.a.createElement(Ue.a.Footer,null,r.a.createElement(H.a,{variant:"secondary",onClick:d},"Close"),r.a.createElement(H.a,{variant:"primary",onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===o){e.next=8;break}return e.next=4,m.a.awrap(N({password:o},c._id));case 4:200===e.sent.status&&(l.handleNotification("User password got updated!",5e3),a(!1)),e.next=9;break;case 8:a(!1);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?l.handleError(e.t0.response.data,5e3):e.t0.request?l.handleError(e.t0.request.data,5e3):l.handleError(e.t0.message,5e3),console.log(e.t0);case 15:case"end":return e.stop()}}),null,null,[[0,11]])}},"Save Changes"))))})),Ae={handleNotification:I,handleError:z,changeUser:A},qe=Object(s.b)((function(e){return{user:e.user,users:e.users}}),Ae)((function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),u=Object(_.a)(s,2),o=u[0],i=u[1],d=Object(n.useState)(null),m=Object(_.a)(d,2),f=m[0],p=m[1];if("admin"!==e.user.role)return null;var E={display:"admin"===e.user.role?"":"none"};return r.a.createElement("div",null,r.a.createElement(Te,{showDialog:c,handleShowDialog:l,user:f}),r.a.createElement(Fe,{showDialog:o,handleShowDialog:i,user:f}),r.a.createElement(we.a,{className:"table table-hover table-fixed"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Fullname"),r.a.createElement("th",null,"Mail"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Active"))),r.a.createElement("tbody",null,e.users.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.role),r.a.createElement("td",null,e.active.toString()),r.a.createElement("td",{style:E},r.a.createElement(H.a,{onClick:function(){return function(e){p(e),l(!0)}(e)}},"Edit Profile")),r.a.createElement("td",{style:E},r.a.createElement(H.a,{onClick:function(){return function(e){p(e),i(!0)}(e)}},"Edit Password")))})))))})),Ie={setUser:T,getUsers:F,removeUser:function(){return function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:window.localStorage.removeItem("loggedappUser"),e({type:"REMOVEUSER"});case 2:case"end":return t.stop()}}))}},handleNotification:I,getFiles:P},Le=Object(s.b)((function(e){return{user:e.user,users:e.users}}),Ie)((function(e){Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedappUser");if(t){var a=JSON.parse(t);e.setUser(a),"admin"===a.role&&e.getUsers()}}),[]);var t={padding:5};if(null===e.user)return r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-15"},r.a.createElement(he,null),r.a.createElement(Z,null),r.a.createElement(u.a,null,r.a.createElement("h1",null,"SecureBox"),r.a.createElement(u.b,{style:t,to:"/"},"Login"),r.a.createElement(u.b,{style:t,to:"/registration"},"Registration"),r.a.createElement("br",null),r.a.createElement(o.a,{exact:!0,path:"/",render:function(){return r.a.createElement(K,null)}}),r.a.createElement(o.a,{exact:!0,path:"/registration",render:function(){return r.a.createElement(Q,null)}}))))));var a={padding:5,display:"admin"===e.user.role?"":"none"};return r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-15"},r.a.createElement(he,null),r.a.createElement(Z,null),r.a.createElement(u.a,null,r.a.createElement("h1",{className:"title"},"SecureBox"),r.a.createElement("br",null),r.a.createElement(u.b,{style:t,to:"/"},"Home"),r.a.createElement(u.b,{style:t,to:"/upload"},"Upload"),r.a.createElement(u.b,{style:t,to:"/allfiles"},"Files"),r.a.createElement(u.b,{style:t,to:"/profile"},"Profile"),r.a.createElement(u.b,{style:a,to:"/admin"},"Admin"),e.user.username," is logged in ",r.a.createElement(H.a,{onClick:function(){e.removeUser(),e.handleNotification("Logout successfull!",5e3)}},"Logout"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(o.a,{exact:!0,path:"/",render:function(){return r.a.createElement(se,null)}}),r.a.createElement(o.a,{exact:!0,path:"/upload",render:function(e){return r.a.createElement(Ee,e)}}),r.a.createElement(o.a,{exact:!0,path:"/allfiles",render:function(e){return r.a.createElement(Ce,e)}}),r.a.createElement(o.a,{exact:!0,path:"/profile",render:function(e){return r.a.createElement(ke,e)}}),r.a.createElement(o.a,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(qe,e)}}))))))})),Pe=a(37),Me=a(117),_e=a(118),Ve=Object(Pe.combineReducers)({user:R,users:q,error:B,notification:L,files:M}),ze=Object(Pe.createStore)(Ve,Object(_e.composeWithDevTools)(Object(Pe.applyMiddleware)(Me.a)));l.a.render(r.a.createElement(s.a,{store:ze},r.a.createElement(Le,null)),document.getElementById("root"))},34:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.2e1371b3.chunk.js.map